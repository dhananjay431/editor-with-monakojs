<!DOCTYPE html>
<html>

<head>
  <title>Monaco Editor Demo</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/monaco-editor/min/vs/base/vs.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    #res {
      display: flex;
      flex-direction: column-reverse;
    }
  </style>
</head>

<body>
  <div class="row">
    <div class="col-md-6" style="height:100vh" id="container">

    </div>
    <div class="col-md-6" id="res" style="border :1px solid red;overflow: scroll;">
      werwqerqwerwer
      qwerwer</div>
  </div>
  </head>

  <script src="../node_modules/monaco-editor/min/vs/loader.js"></script>
  <script>

    console.log = function (data) {
      const para = document.createElement("p");
      const node = document.createTextNode(`${data}`);

      para.appendChild(node);
      document.getElementById("res").appendChild(para);

    }
    require.config({ paths: { vs: '../node_modules/monaco-editor/min/vs' } });

    require(['vs/editor/editor.main'], function () {
      const editor = monaco.editor.create(
        document.getElementById('container'),
        {
          value: '// Your initial code here',
          language: 'javascript',
          theme: 'vs-dark',
        }
      );
      function run() {
        const value = editor.getValue();
        try {
          document.getElementById("res").innerHTML = "";
          let res = new Function(value);
          res();
        } catch (err) {

        }
      }

      let x;
      editor.onDidChangeModelContent((event) => {
        // Code that will be executed whenever the editor content changes

        if(x){
          clearTimeout(x);
        }
        x = setTimeout(()=>{
          run();
          x= undefined;
        },3000)
        


      });
    });
  </script>
</body>

</html>